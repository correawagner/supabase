---
id: database-backups
title: Database Backups
description: Learn about the different ways your Supabase project's database is backed up
---

Database backups are an integral part of any disaster recovery plan. Disasters come in many shapes and sizes. It could be as simple as accidentally deleting a table column, the database crashing, or even a natural calamity wiping out the underlying hardware a database is running on. The risks and impact brought by these scenarios can never be fully eliminated, but only minimized or even mitigated. Having database backups is a form of insurance policy. They are essentially snapshots of the database at various points in time. When disaster strikes, database backups allow the project to be brought back to any of these points in time, therefore averting the crisis.

## Frequency of Backups

When deciding how often a database should be backed up, the key business metric Recovery Point Objective (RPO) should be considered. RPO is the threshold for how much data, measured in time, a business could lose when disaster strikes. This amount is fully dependent on a business and its underlying requirements. A low RPO would mean that database backups would have to be taken at an increased cadence throughout the day. Each Supabase project has access to two forms of backups, Daily Backups and Point-in-Time Recovery. The agreed upon RPO would be a deciding factor in choosing which solution best fits a project.

:::note
Database backups do not include objects stored via the Storage API, as the database only includes metadata about these objects. Restoring an old backup does not restore objects that have been deleted since then.
:::

## Daily Backups

All Supabase projects are backed up automatically on a daily basis. Access to these backups are limited to [Pro and Enterprise tier projects](https://supabase.com/pricing). In terms of Recovery Point Objective (RPO), Daily Backups are suitable for projects willing to lose up to 24 hours worth of data if disaster hits at the most inopportune time. If a lower RPO is required, enabling Point-in-Time Recovery should be considered.

### Backup Process

The PostgreSQL utility [pg_dumpall](https://www.postgresql.org/docs/current/app-pg-dumpall.html) is used to perform daily backups. An SQL file is generated, zipped up, and sent to our storage servers for safe keeping. 

```
Insert screenshot of Daily Backups dashboard
```

Daily backups can be accessed in the [Database Backups](https://app.supabase.com/project/_/database/backups/scheduled) page in the Dashboard. Pro tier projects can access the last 7 days’ worth of daily backups while Enterprise tier projects can access up to 30 days’ worth of daily backups. Users can restore their project to any one of the backups or download them as a zipped SQL file.

### Restoration Process

Select the backup closest to the desired point in time to restore to. Earlier backups can always be chosen too but do consider the number of days’ worth of data that could be lost. 

```
Insert screenshot of the Dashboard with the confirmation modal 
```

The Dashboard prompts for a confirmation before proceeding with the restoration. The project will be inaccessible during the restoration so allot some downtime beforehand. The restoration depends on the size of the database—the larger it is, the longer the downtime will be. After the confirmation is been given, the underlying SQL of the chosen backup is then run against the project. The PostgreSQL utility [psql](https://www.postgresql.org/docs/current/app-psql.html) is used to facilitate the restoration.

```
Insert screenshot of the Dashboard of the project in restoration mode
```

The Dashboard displays a notification once the restoration completes.

```
Insert screenshot of the Dashboard of the project completing restoration
```

## Point-in-Time Recovery

Point-in-Time Recovery (PITR) allows a project to be backed up at much shorter intervals. This provides users an option to restore to any chosen point of up to seconds in granularity. Even with daily backups, a day’s worth of data could still be lost. With PITR, backups could be performed up to the point of disaster.

This feature is available to all Enterprise tier projects. Pro tier projects can enable PITR as an add-on.

### Backup Process

PITR is made possible by a combination of taking physical backups of a project, as well as archiving [Write Ahead Log (WAL)](https://www.postgresql.org/docs/current/wal-intro.html) files. Physical backups provide a snapshot of the underlying directory of the database, while WAL files contain records of every change made in the database. See the [Physical vs Logical Backups in PostgreSQL](https://supabase.com/blog/postgresql-physical-logical-backups) blog post for more details.

Supabase uses [WAL-G](https://github.com/wal-g/wal-g), an open source archival and restoration tool, to handle both aspects of PITR. On a daily basis, a snapshot of the database is taken and sent to our storage servers. Throughout the day, as database transactions occur, WAL files are generated and uploaded. 

By default, WAL files are backed up at two minute intervals. If these files cross a certain file size threshold, they are backed up immediately. As such, during periods of high amount of transactions, WAL file backups become more frequent. Conversely, when there is no activity in the database, WAL file backups are not made. Overall, this means in a worst case scenario or disaster, the PITR achieves a Recovery Point Objective (RPO) of two minutes.

```
Insert screenshot of Point-in-Time Recovery on the Dashboard
```

PITR can be accessed in the [Database Backups](https://app.supabase.com/project/_/database/backups/pitr) page in the Dashboard. The recovery period of a project is indicated by the earliest and latest points of recoveries displayed in your preferred timezone. If need be, the maximum amount of this recovery period can be modified accordingly. 

Note that the latest restore point of the project could be significantly far from the current time. This occurs when there has not been any recent activity in the database, and therefore no WAL file backups have been made recently. This is perfectly fine as the state of the database at the latest point of recovery is still indicative of the state of the database at the current time given that no transactions have been made in between.

### Restoration Process

Click **Start a restore** to select a PITR backup. The process only proceeds if the selected date and time fall within the earliest and latest points of recovery.

```
Insert screenshot of the Dashboard with the confirmation modal 
```

The Dashboard prompts for a confirmation before proceeding with the restoration. The project will be inaccessible during the restoration so allot some downtime beforehand. The restoration depends on the size of the database—the larger it is, the longer the downtime will be. During the process, the latest physical backup is downloaded to the project and the database is partially restored. WAL files generated after this physical backup, up to the specified point-in-time, are then downloaded. The underlying records of transactions in these files are replayed against the database to complete the restoration.

```
Insert screenshot of the Dashboard of the project in restoration mode
```

The Dashboard displays a notification once the restoration completes.

```
Insert screenshot of the Dashboard of the project completing restoration
```
