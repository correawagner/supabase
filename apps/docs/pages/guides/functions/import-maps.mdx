import Layout from '~/layouts/DefaultGuideLayout'

export const meta = {
  id: 'functions-import-maps',
  title: 'Using Import Maps',
  description: 'Managing packages and dependencies using Import Maps.',
  subtitle: 'Managing packages and dependencies using Import Maps.',
  tocVideo: 'ILr3cneZuFk',
}

An Import Map us similar to a `package.json` file. They are a way to manage your dependencies.

## What are Import Maps?

An [Import Map](https://github.com/WICG/import-maps#the-import-map) is a web-platform standard that allows you to use bare specifiers. Consider this code:

```ts
// without import maps:
import lodash from 'https://cdn.skypack.dev/lodash'

// with import maps:
import lodash from 'lodash'
```

We can accomplish this using an Import Map, which is simply a JSON file with the following:

```json supabase/functions/import_map.json
{
  "imports": {
    "lodash": "https://cdn.skypack.dev/lodash"
  }
}
```

## Import Map Placement

We recommend creating one `import_map.json` within the `/supabase/functions` folder, similar to a `package.json` file, to define imports that can be used across all of your project's functions.

```bash
└── supabase
    ├── functions
    │   ├── import_map.json # A top-level import map to use across functions..
    │   ├── function-one
    │   │   └── index.ts
    └── config.toml
```

Alternatively, you can create one `import_map.json` file in each function folder, which will take priority over a top-level file.

You can override this default behaviour by providing the `--import-map <string>` flag to the `serve` and `deploy` commands.

## Visual Studio Code Configuration

In order for vscode to understand the imports correctly, you need to specify the `deno.importMap` flag in your `.vscode/settings.json` file:

```json settings.json
{
  "deno.enable": true,
  "deno.unstable": true,
  "deno.importMap": "./supabase/functions/import_map.json"
}
```

For a full guide on developing with Deno in Visual Studio Code, see [this guide](https://deno.land/manual@v1.25.4/vscode_deno).

export const Page = ({ children }) => <Layout meta={meta} children={children} />

export default Page
